mode: rule
allow-lan: true
unified-delay: true
bind-address: '*'
log-level: silent
ipv6: false
geodata-mode: true
external-controller: 0.0.0.0:9090
external-ui: dashboard/dist
tcp-concurrent: false
interface-name: ""
enable-process: true
geodata-loader: memconservative
inbound-tfo: false
secret: ""
profile:
  store-selected: true
  store-fake-ip: false
geox-url: {mmdb: "https://cdn.jsdelivr.net/gh/Dreamacro/maxmind-geoip@release/Country.mmdb", geoip: "https://github.com/v2fly/geoip/releases/latest/download/geoip-only-cn-private.dat", geosite: "https://github.com/taamarin/v2ray-rules-dat/raw/release/geosite.dat"}
tun:
  enable: false
  stack: system
  dns-hijack:
    - any:53
  auto-route: false
  auto-detect-interface: false
sniffer:
  enable: false
  sniffing:
    - tls
    - http
  force-domain:
    - '+'
  skip-domain:
    - '+.google.com'
  port-whitelist:
    - 443
    - 80
dns:
  enable: true
  device: Meta
  ipv6: false
  prefer-h3: true #start DOH to use http/3 first
  default-nameserver:
    - 1.1.1.1
    - 94.140.14.14
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.local"
    - "*.localhost"
    - "dns.*"
    - "dns.*.*"
    - "networktest.twilio.com"
    - "+.twilio.com"
  nameserver:
    - 9.9.9.9
    - 8.8.8.8
    - 149.112.112.112
  fallback:
    - 8.8.8.8
    - 1.1.1.1
  fallback-filter:
    geoip: false
    geoip-code: "ID"
    geosite: []
    ipcidr: []
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
hosts:
  'ota.googlezip.net': 127.0.0.1
  'cacerts.digicert.com': 104.21.21.147
tproxy-port: 9898
proxies:
proxy-groups:
  - name: "PILIH-GRUP-SERVER"
    type: select
    proxies: [MAINSSH (beberapa server offline saat jam 6/12 selama 30-60menit), OPENTUNNEL, LAINNYA, SSHKIT, ID, DIRECT, ]
  - name: "MAINSSH (beberapa server offline saat jam 6/12 selama 30-60menit)"
    type: select
    use: [MAINSSH]
  - name: "OPENTUNNEL"
    type: select
    use: [OPENTUNNEL]
  - name: "LAINNYA"
    type: select
    use: [LAINNYA]
  - name: "SSHKIT"
    type: select
    use: [SSHKIT]
  - name: "ID"
    type: select
    use: [ID]
#  - name: BEST-PING
#    type: url-test
#    url: http://cp.cloudflare.com/generate_204
#    ninterval: 300
#    use: [MAINSSH,OPENTUNNEL,LAINNYA,SSHKIT,ID]

proxy-providers:
  MAINSSH:
    type: http
    path: ./proxy-providers/mainssh.yaml
    url: "https://raw.githubusercontent.com/widakdi/Clash/main/server/mainssh.yaml"
    interval: 3600
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300
  OPENTUNNEL:
    type: http
    path: ./proxy-providers/opentunnel.yaml
    url: "https://raw.githubusercontent.com/widakdi/Clash/main/server/opentunnel.yaml"
    interval: 3600
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300
  LAINNYA:
    type: http
    path: ./proxy-providers/lain.yaml
    url: "https://raw.githubusercontent.com/widakdi/Clash/main/server/lain.yaml"
    interval: 3600
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300
  SSHKIT:
    type: http
    path: ./proxy-providers/sshkit.yaml
    url: "https://raw.githubusercontent.com/widakdi/Clash/main/server/sshkit.yaml"
    interval: 3600
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300
  ID:
    type: http
    path: ./proxy-providers/id.yaml
    url: "https://raw.githubusercontent.com/widakdi/Clash/main/server/id.yaml"
    interval: 3600
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300
rules:
  - GEOSITE,CATEGORY-ADS-ALL,PILIH-GRUP-SERVER
  - AND,((GEOSITE,YOUTUBE),(NETWORK,UDP)),REJECT
  - IP-CIDR,127.0.0.1/32,REJECT,no-resolve
  - IP-CIDR6,::1/128,REJECT,no-resolve
  - PROCESS-NAME, com.whatsapp, DIRECT
  - MATCH,PILIH-GRUP-SERVER
